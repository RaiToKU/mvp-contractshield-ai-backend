# ContractShield AI Backend - é¡¹ç›®ç»“æ„

æœ¬æ–‡æ¡£æè¿°äº† ContractShield AI åç«¯é¡¹ç›®çš„æ•´ä½“ç»“æ„å’Œå„ä¸ªç»„ä»¶çš„åŠŸèƒ½ã€‚

## é¡¹ç›®æ¦‚è§ˆ

ContractShield AI æ˜¯ä¸€ä¸ªåŸºäº FastAPI çš„æ™ºèƒ½åˆåŒå®¡æŸ¥ç³»ç»Ÿï¼Œä½¿ç”¨ AI æŠ€æœ¯æ¥åˆ†æå’Œå®¡æŸ¥æ³•å¾‹åˆåŒæ–‡æ¡£ã€‚

## ç›®å½•ç»“æ„æ¦‚è§ˆ

```
contractshield-ai-backend/
â”œâ”€â”€ app/                     # æ ¸å¿ƒåº”ç”¨ä»£ç 
â”œâ”€â”€ database/                # æ•°æ®åº“ç›¸å…³æ–‡ä»¶
â”œâ”€â”€ deployment/              # éƒ¨ç½²å’Œè¿ç»´æ–‡ä»¶
â”œâ”€â”€ docs/                    # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ tests/                   # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ temp/                    # ä¸´æ—¶æ–‡ä»¶ï¼ˆå¼€å‘ç”¨ï¼‰
â”œâ”€â”€ .github/                 # GitHub é…ç½®
â”œâ”€â”€ uploads/                 # ä¸Šä¼ æ–‡ä»¶ç›®å½•ï¼ˆè¿è¡Œæ—¶åˆ›å»ºï¼‰
â”œâ”€â”€ exports/                 # å¯¼å‡ºæ–‡ä»¶ç›®å½•ï¼ˆè¿è¡Œæ—¶åˆ›å»ºï¼‰
â””â”€â”€ é…ç½®å’Œæ–‡æ¡£æ–‡ä»¶
```

## è¯¦ç»†è¯´æ˜

### ğŸ“ app/ - æ ¸å¿ƒåº”ç”¨ä»£ç 

åŒ…å« FastAPI åº”ç”¨çš„æ‰€æœ‰æ ¸å¿ƒä»£ç ï¼š

- `main.py` - FastAPI åº”ç”¨ä¸»æ–‡ä»¶ï¼ŒåŒ…å«åº”ç”¨åˆå§‹åŒ–ã€ä¸­é—´ä»¶é…ç½®ã€è·¯ç”±æ³¨å†Œ
- `database.py` - æ•°æ®åº“è¿æ¥å’Œä¼šè¯ç®¡ç†
- `models.py` - SQLAlchemy æ•°æ®æ¨¡å‹å®šä¹‰
- `websocket_manager.py` - WebSocket è¿æ¥ç®¡ç†å™¨
- `routes/` - API è·¯ç”±æ¨¡å—
  - `upload.py` - æ–‡ä»¶ä¸Šä¼ ç›¸å…³è·¯ç”±
  - `review.py` - åˆåŒå®¡æŸ¥ç›¸å…³è·¯ç”±
  - `export.py` - æŠ¥å‘Šå¯¼å‡ºç›¸å…³è·¯ç”±
  - `websocket.py` - WebSocket è·¯ç”±
- `services/` - ä¸šåŠ¡é€»è¾‘æœåŠ¡
  - `file_service.py` - æ–‡ä»¶å¤„ç†æœåŠ¡
  - `ai_service.py` - AI æœåŠ¡é›†æˆ
  - `review_service.py` - åˆåŒå®¡æŸ¥æœåŠ¡
  - `export_service.py` - æŠ¥å‘Šå¯¼å‡ºæœåŠ¡

### ğŸ“ database/ - æ•°æ®åº“ç›¸å…³æ–‡ä»¶

åŒ…å«æ‰€æœ‰æ•°æ®åº“ç›¸å…³çš„é…ç½®å’Œè„šæœ¬ï¼š

- `alembic/` - Alembic æ•°æ®åº“è¿ç§»æ–‡ä»¶
  - `versions/` - è¿ç§»ç‰ˆæœ¬æ–‡ä»¶
  - `env.py` - Alembic ç¯å¢ƒé…ç½®
  - `script.py.mako` - è¿ç§»è„šæœ¬æ¨¡æ¿
- `alembic.ini` - Alembic é…ç½®æ–‡ä»¶
- `init_db.py` - æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
- `update_db.py` - æ•°æ®åº“æ›´æ–°è„šæœ¬
- `init.sql` - åˆå§‹åŒ– SQL è„šæœ¬

**ä½¿ç”¨è¯´æ˜ï¼š**
```bash
# è¿›å…¥æ•°æ®åº“ç›®å½•æ‰§è¡Œè¿ç§»
cd database
alembic upgrade head
cd ..
```

### ğŸ“ deployment/ - éƒ¨ç½²å’Œè¿ç»´æ–‡ä»¶

åŒ…å«éƒ¨ç½²ã€é…ç½®å’Œè¿è¡Œç›¸å…³çš„è„šæœ¬ï¼š

- `deploy.sh` - éƒ¨ç½²è„šæœ¬
- `docker-compose.yml` - Docker ç¼–æ’é…ç½®
- `Dockerfile` - Docker é•œåƒæ„å»ºæ–‡ä»¶
- `nginx.conf` - Nginx åå‘ä»£ç†é…ç½®

**ä½¿ç”¨è¯´æ˜ï¼š**
```bash
# Docker éƒ¨ç½²
docker-compose -f deployment/docker-compose.yml up -d

# ä½¿ç”¨ Nginx é…ç½®
sudo cp deployment/nginx.conf /etc/nginx/sites-available/contractshield
```

### ğŸ“ docs/ - é¡¹ç›®æ–‡æ¡£

åŒ…å«æ‰€æœ‰é¡¹ç›®ç›¸å…³çš„æ–‡æ¡£ï¼š

- `API_Documentation.md` - API æ¥å£æ–‡æ¡£
- `Frontend_Integration_Guide.md` - å‰ç«¯é›†æˆæŒ‡å—
- `PROJECT_STRUCTURE.md` - é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆæœ¬æ–‡æ¡£ï¼‰
- `WebSocket_Guide.md` - WebSocket ä½¿ç”¨æŒ‡å—

### ğŸ“ tests/ - æµ‹è¯•æ–‡ä»¶

åŒ…å«æ‰€æœ‰æµ‹è¯•ç›¸å…³çš„æ–‡ä»¶ï¼š

- `test_*.py` - å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
  - `test_api.py` - API æµ‹è¯•
  - `test_services.py` - æœåŠ¡å±‚æµ‹è¯•
  - `test_api_endpoints.py` - API ç«¯ç‚¹æµ‹è¯•
  - `test_implementation.py` - å®ç°æµ‹è¯•
  - `test_websocket.py` - WebSocket æµ‹è¯•
- `simple_*.py` - ç®€å•æµ‹è¯•è„šæœ¬
  - `simple_api_test.py` - ç®€å• API æµ‹è¯•
  - `simple_websocket_test.py` - ç®€å• WebSocket æµ‹è¯•
- `websocket_test.html` - WebSocket æµè§ˆå™¨æµ‹è¯•é¡µé¢
- `create_test_pdf.py` - æµ‹è¯• PDF ç”Ÿæˆå·¥å…·
- `run_tests.py` - æµ‹è¯•è¿è¡Œè„šæœ¬
- `conftest.py` - pytest é…ç½®æ–‡ä»¶
- `README.md` - æµ‹è¯•æ–‡æ¡£

### ğŸ“ temp/ - ä¸´æ—¶æ–‡ä»¶ï¼ˆå¼€å‘ç”¨ï¼‰

åŒ…å«å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸´æ—¶æ–‡ä»¶ï¼š

- `check_task_33.py` - ä¸´æ—¶æµ‹è¯•è„šæœ¬
- `get_task_33_info.py` - ä¸´æ—¶ä¿¡æ¯è·å–è„šæœ¬
- `test_contract.txt` - æµ‹è¯•åˆåŒæ–‡æœ¬
- `test_contract_copy.pdf` - æµ‹è¯•åˆåŒPDF

### ğŸ“ .github/ - GitHub é…ç½®

åŒ…å« GitHub ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼š

- `workflows/` - GitHub Actions å·¥ä½œæµé…ç½®

**ä½¿ç”¨è¯´æ˜ï¼š**
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests/

# è¿è¡Œç‰¹å®šæµ‹è¯•
python tests/simple_api_test.py

# åœ¨æµè§ˆå™¨ä¸­æµ‹è¯• WebSocket
open tests/websocket_test.html
```

### ğŸ“„ æ ¹ç›®å½•æ–‡ä»¶

- `run.py` - åº”ç”¨å¯åŠ¨è„šæœ¬
- `requirements.txt` - Python ä¾èµ–åˆ—è¡¨
- `pytest.ini` - pytest é…ç½®
- `.env.example` - ç¯å¢ƒå˜é‡ç¤ºä¾‹
- `.gitignore` - Git å¿½ç•¥æ–‡ä»¶é…ç½®
- `README.md` - é¡¹ç›®ä¸»æ–‡æ¡£
- `docker-compose.prod.yml` - ç”Ÿäº§ç¯å¢ƒ Docker Compose é…ç½®

### ğŸ“ è¿è¡Œæ—¶ç›®å½•

è¿™äº›ç›®å½•åœ¨åº”ç”¨è¿è¡Œæ—¶è‡ªåŠ¨åˆ›å»ºï¼š

- `uploads/` - ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶å­˜å‚¨
- `exports/` - ç”Ÿæˆçš„æŠ¥å‘Šæ–‡ä»¶å­˜å‚¨

## ç›®å½•ç»„ç»‡åŸåˆ™

1. **åŠŸèƒ½åˆ†ç¦»**ï¼šæŒ‰åŠŸèƒ½å°†æ–‡ä»¶åˆ†ç»„åˆ°ä¸åŒç›®å½•
2. **ç¯å¢ƒéš”ç¦»**ï¼šå¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²ç›¸å…³æ–‡ä»¶åˆ†åˆ«å­˜æ”¾
3. **æ˜“äºç»´æŠ¤**ï¼šç›¸å…³æ–‡ä»¶é›†ä¸­ç®¡ç†ï¼Œä¾¿äºæŸ¥æ‰¾å’Œä¿®æ”¹
4. **æ ‡å‡†åŒ–**ï¼šéµå¾ª Python é¡¹ç›®çš„æ ‡å‡†ç›®å½•ç»“æ„

## å¼€å‘å·¥ä½œæµ

1. **å¼€å‘æ–°åŠŸèƒ½**ï¼šåœ¨ `app/` ç›®å½•ä¸‹æ·»åŠ ä»£ç 
2. **ç¼–å†™æµ‹è¯•**ï¼šåœ¨ `tests/` ç›®å½•ä¸‹æ·»åŠ æµ‹è¯•æ–‡ä»¶
3. **æ•°æ®åº“å˜æ›´**ï¼šåœ¨ `database/` ç›®å½•ä¸‹ç®¡ç†è¿ç§»
4. **éƒ¨ç½²é…ç½®**ï¼šåœ¨ `deployment/` ç›®å½•ä¸‹ä¿®æ”¹é…ç½®
5. **æ–‡æ¡£æ›´æ–°**ï¼šåœ¨ `docs/` ç›®å½•ä¸‹ç»´æŠ¤æ–‡æ¡£

## æ³¨æ„äº‹é¡¹

- æ•°æ®åº“è¿ç§»éœ€è¦åœ¨ `database/` ç›®å½•ä¸‹æ‰§è¡Œ
- æµ‹è¯•æ–‡ä»¶ç»Ÿä¸€æ”¾åœ¨ `tests/` ç›®å½•ä¸‹
- éƒ¨ç½²ç›¸å…³é…ç½®é›†ä¸­åœ¨ `deployment/` ç›®å½•
- æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä¿æŒåœ¨ `app/` ç›®å½•ä¸‹
- é¡¹ç›®æ–‡æ¡£é›†ä¸­åœ¨ `docs/` ç›®å½•ä¸‹
- ä¸´æ—¶å¼€å‘æ–‡ä»¶æ”¾åœ¨ `temp/` ç›®å½•ä¸‹

è¿™ç§ç›®å½•ç»“æ„ä½¿é¡¹ç›®æ›´åŠ æ¸…æ™°ã€æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚